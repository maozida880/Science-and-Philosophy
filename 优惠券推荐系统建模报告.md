

# **智能优惠券推荐系统战略蓝图**

## **I. 执行摘要**

### **问题陈述**

当前，停车缴费场景下的优惠券方案依赖人工运营组合与推荐，这种方式存在明显瓶瓶颈。它不仅限制了个性化体验的实现，导致潜在的收入机会流失，还可能因推广负毛利产品而侵蚀利润。核心目标是构建一个数据驱动的智能推荐系统，在用户支付停车费的关键时刻，精准推送个性化的权益优惠券方案，以替代现有的“一刀切”运营模式。

### **核心研究发现**

数据分析揭示了若干关键的业务驱动因素。首先，少数“明星方案”贡献了绝大部分的商品交易总额（GMV），特别是那些捆绑了瑞幸咖啡等高价值第三方权益且定价在10-15元区间的方案 1。其次，在所有展示位置中，“挽留弹窗”是转化效率最高的黄金展位，其产生的GMV占据了总额的80%以上，这表明用户在即将完成支付时的决策窗口期价值巨大 2。最后，用户的购买行为与停车习惯高度相关，高频次、长时长的停车用户是价值最高的细分客群，其转化意愿远超普通用户 3。

### **核心战略建议**

为应对上述挑战并抓住机遇，我们提出构建一个两阶段推荐架构，该架构包含“候选集生成”与“个性化排序”两个核心环节。在排序阶段，建议采用**宽深度（Wide & Deep）或深度因子分解机（DeepFM）模型。该模型将在一个多目标优化框架**下进行训练，其核心目标是最大化一个综合了**商品交易总额（GMV）和毛利率**的加权效用函数。这一设计旨在确保系统在驱动业务增长的同时，能够兼顾并提升盈利能力。

### **预期商业影响**

该智能推荐系统上线后，预计将带来多方面的显著业务提升。通过为不同用户匹配最契合其消费偏好的优惠券方案，系统的加购转化率将得到有效提升。个性化定价与价值感知将推动用户客单价（ARPU）的增长。更重要的是，通过在推荐模型中引入利润感知能力，系统将智能地调控负毛利方案的曝光，从而优化整体业务的盈利结构。此外，该系统将为未来引入新的合作伙伴权益提供一个可扩展、可量化的测试与推广平台。

## **II. 当前业绩格局解构**

本章节旨在通过深入分析产品与销售数据，为推荐系统的构建确立一个清晰的基线认知。分析的核心结论是，一个经过精心策划、聚焦高质量产品的目录远胜于一个庞大但未经筛选的目录，并且盈利能力必须被置于战略核心地位。

### **A. 宏观业务趋势：向价值驱动的转变**

对整体业务健康指标的分析揭示了一个积极的转型趋势。数据显示，尽管从2024年末至2025年8月，平台的订单量有所下降，且在售的优惠券方案（SKU）数量从890个大幅削减至216个，但同期内，用户平均收入（ARPU）和平均订单价值（AOV）却实现了稳步增长 1。

这一现象表明，业务策略已经从早期的“以量取胜”转向了“以质取胜”。ARPU从2024年11月的5.25元增长至2025年8月的10.11元，几乎翻倍，而方案数量则减少了约75% 1。这打破了“更多选择等于更多销售”的传统假设。数据清晰地指出，减少低效和无效的方案选项，集中资源推广少数高价值、高吸引力的方案，是驱动用户单次消费价值提升的关键。这一成功的运营实践为推荐系统的设计提供了宝贵的经验：算法的目标不应是盲目地扩大推荐范围，而应是学习并放大这种“少即是多”的精品策略，实现从人工选品到智能优选的进化。

### **B. 优惠券方案剖析：BCG矩阵的应用**

为了更系统地理解产品组合的现状，我们可以借鉴波士顿咨询集团（BCG）矩阵的思维，依据GMV贡献和毛利率两个维度，对现有的优惠券方案进行战略分层 1。

* **“明星方案” (Star Plans):** 此类方案数量极少（7个），但贡献了高达67.9%的GMV，并保持着健康的毛利率（$12\\%$至$100\\%$）。它们是业务的绝对支柱，通常捆绑了如瑞幸咖啡、中石化加油券等具有广泛吸引力的第三方权益 1。  
* **“问号方案” (Question Mark Plans):** 此类方案（5个）同样贡献了显著的GMV（30.6%），但其毛利率均为负值（$-8\\%$至$-63\\%$），属于高销量的“赔钱赚吆喝”产品。这些方案在吸引流量方面作用显著，但对利润构成了直接损害 1。  
* **“现金方案” (Cash Cow Plans):** 此类方案数量最多（170个），大多是针对特定停车场的专用时长券。它们通常拥有极高的毛利率（很多为），但由于适用范围窄，总GMV贡献仅为1.2%，未能形成规模效应 1。  
* **“瘦狗方案” (Dog Plans):** 此类方案（6个）在GMV和毛利率两方面均表现不佳，总GMV贡献仅为0.31%，是需要被优先清理或优化的对象 1。

**表1：优惠券方案按战略分层表现汇总**

| 方案分层 | 方案数量 | 总GMV (万元) | GMV贡献占比 | 平均毛利率 | 顶级方案示例 |
| :---- | :---- | :---- | :---- | :---- | :---- |
| 明星方案 | 7 | 188.1 | 67.90% | \> 12% | 【加购弹窗】23元瑞幸咖啡券+5元停车券（10元） |
| 问号方案 | 5 | 84.75 | 30.60% | \< 0% | 【加购弹窗】8元券包+12元加油满减券（20\~50） |
| 现金方案 | 170 | 3.31 | 1.20% | \~100% | 洛森堡新殿2小时停车券 |
| 瘦狗方案 | 6 | 0.85 | 0.31% | \<= 0% | 2元停车券*4张 |

数据来源: 1

对这一产品组合的深入分析揭示了一个严峻的战略风险。如果推荐系统仅以最大化转化率或GMV为目标，它将会不遗余力地推广那些受欢迎的“问号方案”。这将导致一种“越卖越亏”的局面，直接损害公司的盈利能力。因此，推荐系统的核心优化目标绝不能是单一的GMV。此外，退款数据也提供了一个侧面印证：用户退款的首要原因是“误购/误操作” 3。这可能与部分“问号方案”的复杂规则或误导性宣传有关，用户被高价值的噱头吸引，购买后才发现不适用，从而导致体验不佳和退款。这进一步说明，一个优秀的推荐系统不仅要考虑短期收益，还应将用户满意度（例如，通过惩罚高退款率的商品）纳入考量，以实现长期价值。

### **C. 合作伙伴与方案构成的重要性**

对方案构成的分析进一步揭示了成功的秘诀。数据显示，将一种“全网券”（如咖啡券、加油券）与停车券打包的组合方案，是绝对的销售主力。

具体来看，包含“外卖券”（此类别中主要为瑞幸咖啡券）的组合方案贡献了高达82.22%的GMV，而包含“加油券”的方案则以15.06%的占比位居第二。相比之下，纯粹只包含“停车券”的方案组合，其GMV贡献率不足1% 2。这表明，用户购买这些方案的核心动机并非停车折扣本身，而是以一个优惠的价格（如10元）获得一份高价值的第三方权益（如23元的咖啡券）。停车券在其中更像是一个附加的“添头”。

从方案的复杂度来看，最成功的方案结构非常简单。通常由2个品类下的2个SKU构成（例如，1份咖啡券 \+ 1份停车券包）的方案贡献了247.9万元的GMV，而包含更多SKU的复杂方案销售额则显著降低 1。高频购买用户的数据也证实了这一点，他们最近一年频繁购买的商品列表中，瑞幸咖啡代金券高居榜首 1。

这一系列发现彻底重塑了我们对业务本质的理解。我们销售的并非“停车优惠”，而是一个以停车支付为场景的、高转化率的第三方数字商品分销渠道。停车这一高频、刚需的场景，为销售咖啡、加油等车主生活服务类产品提供了绝佳的切入点。因此，推荐算法在进行特征工程和兴趣匹配时，应将核心的第三方权益（如咖啡、加油）作为最重要的特征，而停车券的面额、数量等则可视为次要的可调参数。这一认知对于未来的产品设计和合作伙伴拓展战略具有深远的指导意义。

### **D. 价格敏感度与产品生命周期**

数据分析清晰地勾勒出了一个“黄金窗口”，即最能激发用户购买意愿的价格区间和产品生命周期。

在价格方面，绝大部分GMV高度集中在**10-15元**的价格区间，该区间的销售额达到了252.1万元，远超其他所有价格区间的总和 1。这个价格点对于用户来说，既足够低，可以作为一次轻松的“冲动消费”，又足以支撑一个具有吸引力的权益组合（例如，用10元买到价值23元的咖啡券）。

在产品生命周期方面，一个方案最“高产”的阶段是其上线的**1-3个月**，这一时期贡献了225.1万元的GMV。上线不足1个月的方案可能尚未积累足够的用户认知和数据，而上线超过3-6个月的方案则可能因为用户已多次见过而产生“审美疲劳”，导致转化率下降 1。

这两个发现为推荐系统提供了明确的指导信号。price\_bracket（价格分段）和plan\_age\_in\_days（方案上线天数）应被视为模型中的关键特征。系统应被设计为能够自动降低那些处于黄金窗口之外的方案的推荐权重，从而实现一种动态的、自我优化的目录管理机制。这也同时凸显了为新方案设计一个有效的“冷启动”策略的必要性，以确保它们能在上线后的第一个月内获得足够的曝光机会，从而公平地评估其市场潜力。

## **III. 目标用户剖析：从行为到可预测的客群**

本章将焦点从产品（“卖什么”）转向用户（“卖给谁”）。分析旨在证明，用户并非同质化的群体，他们的停车行为本身就是预测其购买意愿的强大信号。

### **A. 关键的上下文：渠道与入口**

四个不同的加购展示位置，其业绩表现天差地别。**挽留弹窗**是无可争议的王者，贡献了48.05万元的GMV，是第二名“广告加购商品”（6.445万元）的7倍以上 2。这充分证明了在用户即将完成支付、注意力高度集中的“临门一脚”时刻进行推荐的巨大价值。

用户的支付发起点同样影响着最终的转化。从**出口码**（即在停车场出口道闸处扫码）发起的支付所产生的GMV（36.13万元），几乎是从**场内码**（即在停车场内提前扫码）发起支付（19.66万元）的两倍 2。

这些数据揭示了一个深刻的现实：所谓的“优惠券推荐”并非一个单一的问题，而是由不同场景构成的四个子问题，其中一个场景占据了绝对的主导地位。一个在出口道闸处，面对“挽留弹窗”的用户，其心态是“必须马上支付离开”，时间紧迫，决策链路极短，这为冲动消费创造了完美的条件。相比之下，一个在小程序“我的优惠券”页面浏览的用户，则处于一种低意图、探索性的状态，没有支付的紧迫感。

因此，推荐模型必须具备上下文感知能力。一个单一的、忽略场景差异的模型是远远不够的。更优的方案是构建一个将display\_location（展示位置）和entry\_point（支付入口）作为强分类特征的统一模型。针对“挽留弹窗”这一黄金展位，推荐策略应是展示1-2个经过高度优选、预测置信度最高的方案。而对于“我的优惠券”页面，策略则可以更偏向于探索性和多样性，展示更丰富的选择。

### **B. 基于停车行为定义可预测的用户画像**

用户的转化率并非均匀分布，而是与其停车习惯紧密挂钩，呈现出极强的分化特征。

* **停车频次:** 高频用户（每月停车\>=10次）的购买转化率为，是低频用户（每月0-2次，转化率）的**近16倍** 3。  
* **停车时长:** 长时长用户（停车\>=4小时）的购买转化率为，是短时长用户（停车\<1小时，转化率）的**近19倍** 3。  
* **用户类型:** “临时”用户是购买优惠券方案的绝对主力。而那些已经购买了“月卡”、“季卡”或本身就是“业主”的用户，由于其停车费用已被覆盖或有大幅优惠，几乎没有购买意愿，转化率接近于零 3。

**表2：用户细分客群的转化与价值分析**

| 用户画像 | 定义特征 | 总用户数 (万) | 购买用户数 | 转化率 | 相对转化提升 (vs. 短时长/低频) |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **高价值通勤者** | 停车频次 \>= 10 | 1085.3 | 143 | 0.00132% | \~15.8x |
| **高价值长停访客** | 停车时长 \>= 4h | 1674.1 | 158 | 0.00094% | \~18.8x |
| 中价值用户 | 停车频次 3\~9 | 1936.1 | 52 | 0.00027% | \~3.2x |
| 中价值用户 | 停车时长 1h\~4h | 2238.9 | 55 | 0.00025% | \~4.9x |
| 低价值临时用户 | 停车频次 0\~2 | 4092.8 | 34 | 0.00008% | 1.0x |
| 低价值临时用户 | 停车时长 \< 1h | 3201.1 | 16 | 0.00005% | 1.0x |
| **非目标用户** | 月卡/业主等 | \>140 | \<100 | \~0.01% | \- |

数据来源: 3

这些数据清晰地表明，用户的历史停车行为和当前会话的特征，是预测其购买意图的最强信号。高频用户很可能是通勤族，对于咖啡、加油这类能够规律性使用的权益有天然的需求。长时长用户则因为面临更高的停车费，使得优惠券提供的折扣显得更有价值（例如，在50元的停车费上抵扣5元，比在10元的停车费上抵扣5元更有吸引力）。

基于此，我们可以在用户支付的瞬间，实时地为其打上动态标签，例如“高频长停通勤族”或“低频短停访客”。这些标签应作为核心特征输入到个性化推荐模型中。模型需要学习到，应向前者优先推荐咖啡/加油组合方案，而对后者，则可以尝试推荐其他类型的权益（如果未来有的话），或者干脆不推荐以避免打扰。同时，对于月卡、业主等用户，系统应直接将他们排除在推荐目标之外。

### **C. 购买心理学：价格锚定与用户旅程**

用户的购买决策并非基于加购方案的绝对价格，而是受到其与当次停车费用的相对关系影响。数据显示，当加购方案的价格是原始停车费的**50%~180%**之间时，订单量达到峰值 2。这说明用户在心理上会将停车费作为“锚点”来衡量加购方案的价值。如果停车费很低（如5元），一个10元的加购项会显得过于昂贵（200%）；反之，如果停车费很高（如100元），10元的加购项又显得微不足道（10%）。这个“黄金比例”区间揭示了用户愿意为附加值付费的心理舒适区。

此外，从用户生命周期的角度看，“首购”用户贡献的GMV（42.03万）远高于“复购”用户（13.8万） 2。这表明当前的产品矩阵在吸引新用户首次尝试方面是成功的，但在促进用户重复购买方面可能存在不足。这可能是因为“明星方案”的种类有限，用户购买一次后，在短期内没有再次购买同类产品的需求。

综合来看，推荐模型必须将add\_on\_to\_parking\_fee\_ratio（加购价与停车费之比）作为一个关键的实时计算特征。同时，系统应考虑为“复购”用户设计不同的推荐策略，例如，当用户已经购买过咖啡券后，可以向他们推荐互补性的产品（如洗车券），而不是简单地重复推荐同一种咖啡券。

## **IV. 算法推荐的多阶段蓝图**

本章是报告的技术核心，旨在为算法工程师提供一份具体、可执行的建模计划。它将前述章节的分析洞察，转化为一个清晰的工程实现路径。

### **A. 定义建模任务：一个多目标优化框架**

业务的最终目标不仅仅是提升销售额，而是提升**可盈利的销售额**。因此，推荐系统的建模任务不能被简化为单一的点击率（CTR）或转化率（CVR）预估问题，而必须被定义为一个多目标优化问题 4。

* **主要优化目标:** 模型的首要任务是最大化一个加权的效用函数。该函数综合了商业增长和盈利能力两个维度：  
  其中，和$\\beta\\alpha \> \\beta$；当需要关注盈利质量时，则设置$\\beta \> \\alpha$。  
* **次要优化目标 (用于重排序或业务规则):**  
  * **探索 (Exploration):** 确保新上线的、有潜力的方案（即“冷启动”物品）能够获得足够的初始曝光，以便系统能够收集数据并评估其真实价值。  
  * **多样性 (Diversity):** 避免向同一用户展示多个内容高度相似的方案（例如，三个不同面额但同品牌的咖啡券组合），以提升用户体验。

这种多目标框架是业界领先推荐系统的标准实践，它确保了算法的决策与公司的长期战略目标保持一致 6。

### **B. 两阶段架构：候选集生成与排序**

对于每一个用户的每一次支付请求，都让模型对全量数以百计的优惠券方案进行打分，在计算上是低效且不必要的。行业标准的做法是采用一个“漏斗式”的两阶段架构。

* **第一阶段：候选集生成 (召回)**  
  * **目标:** 从全量商品池中，快速筛选出一个规模较小（例如100-200个）的、与用户和场景相关的候选方案子集。此阶段的目标是保证“召回率”，即不错过任何可能相关的项目。  
  * **建议方法:**  
    1. **规则过滤:** 应用一系列硬性规则来排除明显不相关的项目。例如：过滤掉不适用于用户当前所在停车场的方案；过滤掉已被标记为“瘦狗方案”的产品；过滤掉毛利率极低或为负的方案（根据业务策略决定）。  
    2. **基于物品的协同过滤 (Item-Based CF):** 离线计算好方案之间的相似度（例如，基于同时购买方案的用户集合计算相似度）。当一个用户发起请求时，可以根据其历史购买记录，快速召回与历史购买方案相似的其他方案。  
    3. **基于内容的召回:** 对于没有历史行为的新用户（即“用户冷启动”），可以根据当前场景的上下文信息来生成候选集。例如，对于停车时长超过4小时的用户，可以召回所有包含高面额停车折扣的方案。  
* **第二阶段：个性化排序 (精排)**  
  * **目标:** 对第一阶段生成的100-200个候选方案，利用一个复杂的机器学习模型进行精准打分和排序，最终生成Top-N个推荐结果。此阶段的目标是保证“准确率”。  
  * **建议模型架构：宽深度模型 (Wide & Deep)**  
    * **理论依据:** 当前的推荐问题与Wide & Deep模型的适用场景高度契合 8。该模型结构巧妙地结合了“记忆”（Memorization）和“泛化”（Generalization）两种能力，非常适合处理包含大量稀疏特征的推荐任务 11。  
    * **“宽”部 (Wide):** 这是一个广义线性模型，擅长“记忆”那些简单、强相关的规则。它通过特征交叉来捕捉这些规则。例如，模型可以直接学习到：  
      * AND(用户停车频次='高', 方案品类='咖啡') \-\> 高购买概率  
      * AND(展示位置='挽留弹窗', 方案价格区间='10-15元') \-\> 高购买概率  
    * **“深”部 (Deep):** 这是一个深度神经网络（DNN），负责“泛化”。它通过将高维稀疏的ID类特征（如user\_id, plan\_id）映射到低维稠密的嵌入向量（Embedding）中，来学习特征之间复杂的、非线性的关系。例如：  
      * 它可以学习到，购买过“瑞幸咖啡”方案的用户，可能也会对一个全新的“星巴克咖啡”方案感兴趣，因为这两个方案在嵌入空间中的向量是相近的。  
      * 它可以捕捉到停车时长和停车费用这两个连续特征与用户购买意愿之间复杂的非线性模式。  
  * **备选模型架构：深度因子分解机 (DeepFM)**  
    * **理论依据:** DeepFM是另一个非常优秀的选择 12。它将Wide & Deep模型中需要人工设计特征交叉的“宽”部，替换为了一个能自动学习二阶特征交叉的因子分解机（FM）组件。这在一定程度上减轻了特征工程的负担，同时保证了模型能捕捉到低阶和高阶的特征互动 15。最终选择Wide & Deep还是DeepFM，可以通过离线实验的效果来决定。

### **C. 基础特征工程：模型的燃料**

特征工程是决定推荐系统性能上限的关键步骤，一个强大的模型离不开高质量的特征输入 16。下表为推荐模型设计的初始特征工程蓝图。

**表3：特征工程蓝图**

| 特征组 | 特征名称 | 数据来源/字段 | 数据类型 | 处理方法 | 战略价值 |
| :---- | :---- | :---- | :---- | :---- | :---- |
| **用户 (历史)** | user\_id | 用户表 | Categorical | Embedding | 实现用户粒度的个性化 |
|  | user\_parking\_frequency\_segment | 用户停车记录聚合 | Categorical | One-Hot | 区分高/中/低频用户，预测长期需求 (见表2) |
|  | user\_avg\_parking\_duration\_segment | 用户停车记录聚合 | Categorical | One-Hot | 区分长/中/短时用户，预测价格敏感度 (见表2) |
|  | user\_purchase\_history\_ids | 用户购买记录 | Categorical List | Multi-hot/Avg Pooling | 捕捉用户的历史品类偏好 |
|  | user\_preferred\_partner\_category | 用户购买记录聚合 | Categorical | Embedding | 学习用户对咖啡、加油等核心权益的偏好 |
| **方案 (物品)** | plan\_id | 方案表 | Categorical | Embedding | 实现方案粒度的个性化 |
|  | plan\_price | 方案表 | Continuous | Normalization/Binning | 捕捉价格敏感度 |
|  | plan\_gross\_margin | 方案表 | Continuous | Normalization | 作为多目标优化的关键输入 |
|  | plan\_primary\_partner\_category | 方案表 (解析名称) | Categorical | Embedding | 方案的核心价值载体 (咖啡/加油/洗车等) |
|  | plan\_sku\_count | 方案表 (解析构成) | Continuous | Raw Value | 衡量方案的复杂度 |
|  | plan\_age\_in\_days | 方案表 (创建时间) | Continuous | Log Transform | 捕捉方案的生命周期效应 |
| **上下文 (实时)** | current\_parking\_duration\_minutes | 当前停车订单 | Continuous | Normalization | 实时判断用户当次停车行为 |
|  | current\_parking\_fee | 当前停车订单 | Continuous | Normalization | 实时判断用户当次消费水平，用于价格锚定 |
|  | display\_location | 前端上报 | Categorical | One-Hot | 区分不同推荐场景，是转化率的关键因子 |
|  | entry\_point | 前端上报 | Categorical | One-Hot | 区分支付入口，反映用户紧迫程度 |
|  | time\_of\_day | 请求时间 | Categorical | One-Hot | 捕捉用户在不同时段的消费习惯 |
|  | day\_of\_week | 请求时间 | Categorical | One-Hot | 捕捉工作日与周末的消费差异 |
| **交叉特征** | add\_on\_to\_parking\_fee\_ratio | 实时计算 | Continuous | Normalization | 捕捉价格锚定效应 |

为了更清晰地指导模型实现，下表明确了上述特征在Wide & Deep架构中的分配方式。

**表4：Wide & Deep模型特征分配映射**

| 模型组件 | 特征名称 (示例) | 分配原因 |
| :---- | :---- | :---- |
| **Wide (记忆)** | cross(user\_parking\_frequency\_segment, plan\_primary\_partner\_category) | 学习强关联规则，如“高频用户偏好咖啡券” |
|  | cross(display\_location, plan\_price\_bracket) | 学习场景化规则，如“挽留弹窗适合推10-15元方案” |
|  | cross(time\_of\_day, plan\_primary\_partner\_category) | 学习时间敏感规则，如“早高峰推荐咖啡券” |
| **Deep (泛化)** | user\_id, plan\_id (Embedding) | 学习用户和方案的隐式表征，泛化到新用户/方案 |
|  | plan\_primary\_partner\_category (Embedding) | 学习不同权益品类间的相似性 |
|  | normalized\_parking\_fee, plan\_gross\_margin (Continuous) | 捕捉连续特征与购买意愿间的复杂非线性关系 |

## **V. 高级功能与未来路线图**

本章将探讨系统的长期演进方向，以确保其在未来能够保持高效、自适应和领先。

### **A. 解决冷启动与“探索-利用”困境**

* **问题:** 新上线的优惠券方案（即“物品冷启动”）由于没有任何用户交互数据，传统的协同过滤模型永远不会推荐它们，这形成了一个“先有鸡还是先有蛋”的悖论，严重阻碍了产品创新和迭代 18。  
* **解决方案:**  
  1. **利用内容特征:** Deep模型的泛化能力是解决冷启动问题的天然优势。即使一个新方案没有任何交互历史，模型依然可以基于其内容特征（如方案品类、价格、毛利率）进行推荐。如果一个用户历史上偏好10元的咖啡券方案，模型自然能够向他推荐一个新上线的、同样是10元的咖啡券方案。  
  2. **多臂老虎机 (Multi-Armed Bandit, MAB) 框架:** 在排序模型的输出之上，引入MAB框架（如Upper Confidence Bound \- UCB算法）来进行流量的动态分配 6。具体而言，系统可以分配一小部分流量（例如5%）用于“探索”。在这些流量中，系统会有策略地提升那些新上线或曝光不足的方案的得分，给予它们展示机会。这相当于系统在用少量成本“试错”，以快速收集新方案的数据，从而解决了在方案上线第一个月内评估其潜力的难题（呼应第二章的发现）。

### **B. 通过推荐多样性提升用户体验**

* **问题:** 模型在优化过程中，可能会发现对于某个用户，得分最高的三个推荐方案都是内容高度相似的“10元瑞幸咖啡券”，唯一的区别可能只是停车券的面额略有不同。向用户展示这样一组重复、缺乏新意的推荐结果，会严重损害用户体验。  
* **解决方案：最大边界相关性 (Maximal Marginal Relevance, MMR)**  
  * **工作原理:** MMR是一种在模型输出后执行的重排序算法。它不是一次性选出得分最高的N个结果，而是迭代地构建最终的推荐列表。在每一步选择中，它都试图平衡两个因素：与用户的相关性（即模型打分高），以及与已选入列表的其它方案的差异性 20。  
  * **实现步骤:**  
    1. 从模型排序后的候选列表中，直接选择得分最高的方案作为第一个推荐结果。  
    2. 对于所有剩余的候选方案，计算其MMR得分：  
    3. 选择MMR得分最高的方案，加入最终推荐列表。  
    4. 重复步骤2和3，直到选出N个推荐结果。  
  * **参数与配置:**  
    * 参数$\\lambda\\lambda=1\\lambda=0\\lambda=0.7$，然后通过A/B测试进行调优。  
    * 方案之间的相似度similarity(i, j)可以通过计算它们在Deep模型中学习到的嵌入向量的余弦相似度来得到。

### **C. A/B测试与在线评估框架**

模型的离线评估指标（如AUC, Logloss）固然重要，但其真正的价值必须通过在线A/B测试来验证。建立一个严谨的在线实验框架是项目成功的必要条件。

* **对照组:** 采用当前的人工运营策略或简单的规则系统。  
* **实验组:** 部署新的智能推荐模型。  
* **核心决策指标 (Primary Metrics):**  
  * 单位用户会话GMV (GMV per User Session)  
  * 单位用户会话毛利 (Gross Profit per User Session)  
  * 加购转化率 (Add-on Conversion Rate)  
* **辅助观测指标 (Guardrail & Diagnostic Metrics):**  
  * 点击率 (Click-Through Rate, CTR)  
  * 推荐方案多样性 (例如，用香农熵衡量推荐列表中方案品类的丰富度)  
  * 新方案推荐占比 (用于衡量系统的探索能力)  
  * 分方案退款率 (用于监控推荐结果的用户满意度)

## **VI. 结论与优先行动建议**

本报告系统性地分析了优惠券业务的现状，剖析了核心用户群体的行为特征，并为构建一个世界级的智能推荐系统提供了一份详尽的技术蓝图。为确保项目高效、有序地推进，建议团队遵循以下优先级开展工作：

* **第一优先级 (Sprint 1-2: 数据与特征流水线):** 集中资源实现**表3**中定义的特征工程蓝图。这是所有后续模型开发的基础。此阶段的交付物应是一个可供模型训练的、高质量的特征数据集。  
* **第二优先级 (Sprint 3-4: 基线模型开发):** 基于**表4**的特征分配，开发并训练一个初步的Wide & Deep模型。此阶段的优化目标可以简化为预测用户是否购买（is\_purchased），旨在快速建立一个功能完整的基线模型。  
* **第三优先级 (Sprint 5: 多目标优化与业务规则):** 将模型的损失函数升级为加权的GMV与毛利率组合，实现盈利感知。同时，在候选集生成阶段，实施基于规则的过滤策略（例如，默认排除所有负毛利方案）。  
* **第四优先级 (Sprint 6: A/B测试部署):** 通过A/B测试框架，将优化后的模型部署到线上，并开放一小部分流量。初期应聚焦于价值最高的场景进行验证：即针对“临时”用户在“挽留弹窗”位置的推荐。  
* **未来工作 (下季度):** 基于第一轮A/B测试的反馈和数据，着手实现更高级的功能，包括引入MMR算法以提升推荐多样性，以及部署正式的多臂老虎机框架以实现系统化的“探索-利用”平衡。

#### **引用的著作**

1. product\_stastics  
2. product\_analysis  
3. user\_action  
4. vinija.ai, 访问时间为 十月 10, 2025， [https://vinija.ai/recsys/multi-objective-optimization/\#:\~:text=MOO%20refers%20to%20the%20process,maximizing%20accuracy%20while%20minimizing%20error.](https://vinija.ai/recsys/multi-objective-optimization/#:~:text=MOO%20refers%20to%20the%20process,maximizing%20accuracy%20while%20minimizing%20error.)  
5. A Survey of Recommender Systems with Multi-Objective Optimization \- ResearchGate, 访问时间为 十月 10, 2025， [https://www.researchgate.net/publication/356691634\_A\_Survey\_of\_Recommender\_Systems\_with\_Multi-Objective\_Optimization](https://www.researchgate.net/publication/356691634_A_Survey_of_Recommender_Systems_with_Multi-Objective_Optimization)  
6. Vinija's Notes • Recommendation Systems • Multi-Objective Optimization, 访问时间为 十月 10, 2025， [https://vinija.ai/recsys/multi-objective-optimization/](https://vinija.ai/recsys/multi-objective-optimization/)  
7. Multi-Objective Optimization in Recommendation Systems \- Creator Incubation Research, 访问时间为 十月 10, 2025， [https://creatorincubationresearch.com/2025/09/30/multi-objective-optimization-in-recommendation-systems/](https://creatorincubationresearch.com/2025/09/30/multi-objective-optimization-in-recommendation-systems/)  
8. Train a model with Wide & Deep | Vertex AI \- Google Cloud, 访问时间为 十月 10, 2025， [https://cloud.google.com/vertex-ai/docs/tabular-data/tabular-workflows/wide-and-deep-train](https://cloud.google.com/vertex-ai/docs/tabular-data/tabular-workflows/wide-and-deep-train)  
9. Tabular Workflow for Wide & Deep | Vertex AI \- Google Cloud, 访问时间为 十月 10, 2025， [https://cloud.google.com/vertex-ai/docs/tabular-data/tabular-workflows/wide-and-deep](https://cloud.google.com/vertex-ai/docs/tabular-data/tabular-workflows/wide-and-deep)  
10. TensorFlow Wide & Deep Learning Tutorial, 访问时间为 十月 10, 2025， [https://chromium.googlesource.com/external/github.com/tensorflow/tensorflow/+/r0.10/tensorflow/g3doc/tutorials/wide\_and\_deep/index.md](https://chromium.googlesource.com/external/github.com/tensorflow/tensorflow/+/r0.10/tensorflow/g3doc/tutorials/wide_and_deep/index.md)  
11. Wide & Deep Learning: Better Together with TensorFlow \- Google Research, 访问时间为 十月 10, 2025， [https://research.google/blog/wide-amp-deep-learning-better-together-with-tensorflow/](https://research.google/blog/wide-amp-deep-learning-better-together-with-tensorflow/)  
12. Mastering Feature Interactions: A Deep Dive into DLRM-Style Ranking Models (Wide & Deep, DeepFM, etc.) | Shaped Blog, 访问时间为 十月 10, 2025， [https://www.shaped.ai/blog/mastering-feature-interactions-a-deep-dive-into-dlrm-style-ranking-models-wide-deep-deepfm-etc](https://www.shaped.ai/blog/mastering-feature-interactions-a-deep-dive-into-dlrm-style-ranking-models-wide-deep-deepfm-etc)  
13. 21.10. Deep Factorization Machines — Dive into Deep Learning 1.0.3 documentation, 访问时间为 十月 10, 2025， [http://d2l.ai/chapter\_recommender-systems/deepfm.html](http://d2l.ai/chapter_recommender-systems/deepfm.html)  
14. DeepFM: A Factorization-Machine based Neural Network for CTR Prediction \- arXiv, 访问时间为 十月 10, 2025， [https://arxiv.org/abs/1703.04247](https://arxiv.org/abs/1703.04247)  
15. DeepFM: A Factorization-Machine based Neural Network for CTR Prediction, 访问时间为 十月 10, 2025， [https://www.researchgate.net/publication/318829508\_DeepFM\_A\_Factorization-Machine\_based\_Neural\_Network\_for\_CTR\_Prediction](https://www.researchgate.net/publication/318829508_DeepFM_A_Factorization-Machine_based_Neural_Network_for_CTR_Prediction)  
16. What is the role of feature engineering in recommender systems? \- Milvus, 访问时间为 十月 10, 2025， [https://milvus.io/ai-quick-reference/what-is-the-role-of-feature-engineering-in-recommender-systems](https://milvus.io/ai-quick-reference/what-is-the-role-of-feature-engineering-in-recommender-systems)  
17. Recommender Systems: From Theory to Production | by Hang Yu \- Towards AI, 访问时间为 十月 10, 2025， [https://pub.towardsai.net/recommender-systems-from-theory-to-production-0f92bd85dcff](https://pub.towardsai.net/recommender-systems-from-theory-to-production-0f92bd85dcff)  
18. Item-centric Exploration for Cold Start Problem \- arXiv, 访问时间为 十月 10, 2025， [https://arxiv.org/html/2507.09423v1](https://arxiv.org/html/2507.09423v1)  
19. Online Item Cold-Start Recommendation with Popularity-Aware Meta-Learning \- arXiv, 访问时间为 十月 10, 2025， [https://arxiv.org/html/2411.11225v1](https://arxiv.org/html/2411.11225v1)  
20. Diversifying search results with Maximum Marginal Relevance \- Elasticsearch Labs, 访问时间为 十月 10, 2025， [https://www.elastic.co/search-labs/blog/maximum-marginal-relevance-diversify-results](https://www.elastic.co/search-labs/blog/maximum-marginal-relevance-diversify-results)  
21. The Use of MMR, Diversity-Based Reranking for Reordering Documents and Producing Summaries \- ResearchGate, 访问时间为 十月 10, 2025， [https://www.researchgate.net/publication/2269571\_The\_Use\_of\_MMR\_Diversity-Based\_Reranking\_for\_Reordering\_Documents\_and\_Producing\_Summaries](https://www.researchgate.net/publication/2269571_The_Use_of_MMR_Diversity-Based_Reranking_for_Reordering_Documents_and_Producing_Summaries)  
22. Maximal Marginal Relevance \- by Anton Dergunov \- Medium, 访问时间为 十月 10, 2025， [https://medium.com/@adergunov/maximal-marginal-relevance-144c23b42be5](https://medium.com/@adergunov/maximal-marginal-relevance-144c23b42be5)
